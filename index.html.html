<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese 1 단어 학습기</title>
    <meta name="description" content="Chinese 1 교재 12과 단어 학습 - 간체자, 병음, 한국어, 영어">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Noto+Sans+KR:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="word-tutor.css">
</head>

<body>
    <!-- Header -->
    <header id="app-header">
        <div class="header-content">
            <h1>
                <span class="logo-cn">词</span>
                <span class="logo-text">Chinese 1 Words</span>
                <span class="logo-sub">단어 학습기</span>
            </h1>
        </div>
    </header>

    <!-- Lesson Navigation -->
    <nav id="lesson-nav">
        <div class="nav-scroll">
            <!-- Generated by JS -->
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Tab Navigation -->
        <div id="tab-nav">
            <button class="tab-btn active" data-tab="vocab">
                <span class="tab-icon">📚</span>
                <span class="tab-label">단어 카드</span>
            </button>
            <button class="tab-btn" data-tab="stroke">
                <span class="tab-icon">✏️</span>
                <span class="tab-label">필획 연습</span>
            </button>
            <button class="tab-btn" data-tab="quiz-pinyin">
                <span class="tab-icon">🎯</span>
                <span class="tab-label">병음 퀴즈</span>
            </button>
            <button class="tab-btn" data-tab="quiz-korean">
                <span class="tab-icon">📝</span>
                <span class="tab-label">한국어 퀴즈</span>
            </button>
            <button class="tab-btn" data-tab="pronunciation">
                <span class="tab-icon">🎤</span>
                <span class="tab-label">발음 연습</span>
            </button>
        </div>

        <!-- Tab Content Panels -->
        <div id="tab-content">
            <!-- ===== Vocabulary Cards ===== -->
            <section id="panel-vocab" class="tab-panel active">
                <div class="panel-controls">
                    <button id="vocab-prev" class="ctrl-btn" title="이전">◀</button>
                    <span id="vocab-counter">1 / 20</span>
                    <button id="vocab-next" class="ctrl-btn" title="다음">▶</button>
                    <button id="vocab-shuffle" class="ctrl-btn" title="섞기">🔀</button>
                    <button id="vocab-auto" class="ctrl-btn" title="자동 재생">▶️</button>
                </div>
                <div id="vocab-card-container">
                    <div id="vocab-card" class="flip-card">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="card-chinese-big"></div>
                                <div class="card-pinyin-front"></div>
                                <div class="card-hint">클릭하여 뒤집기</div>
                            </div>
                            <div class="flip-card-back">
                                <div class="card-chinese"></div>
                                <div class="card-pinyin"></div>
                                <div class="card-korean"></div>
                                <div class="card-english"></div>
                                <div class="card-pos-badge"></div>
                                <button class="speak-btn" title="발음 듣기">🔊</button>
                                <button class="stroke-btn" title="획순 보기">✏️</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="vocab-list-toggle">
                    <button id="show-vocab-list" class="ctrl-btn">📋 전체 목록 보기</button>
                </div>
                <div id="vocab-list" class="hidden">
                    <table id="vocab-table">
                        <thead>
                            <tr>
                                <th>간체자</th>
                                <th>병음</th>
                                <th>한국어</th>
                                <th>English</th>
                                <th>품사</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>

            <!-- ===== Stroke Order ===== -->
            <section id="panel-stroke" class="tab-panel">
                <div class="panel-controls">
                    <input type="text" id="stroke-input" placeholder="한자 입력 (예: 会)" maxlength="1">
                    <button id="stroke-animate" class="ctrl-btn">▶ 획순 보기</button>
                    <button id="stroke-quiz" class="ctrl-btn">✏️ 쓰기 연습</button>
                </div>
                <div id="stroke-char-grid">
                    <!-- Quick access chars from current lesson vocab -->
                </div>
                <div id="stroke-display">
                    <div id="hanzi-target"></div>
                </div>
                <div id="stroke-info"></div>
            </section>

            <!-- ===== Quiz: Pinyin → Chinese + Korean ===== -->
            <section id="panel-quiz-pinyin" class="tab-panel">
                <div class="panel-controls">
                    <span id="quiz-p-score">점수: 0 / 0</span>
                    <button id="quiz-p-reset" class="ctrl-btn">↺ 다시 시작</button>
                </div>
                <div id="quiz-p-container">
                    <div class="quiz-prompt">
                        <div class="quiz-label">병음 (Pinyin)</div>
                        <div id="quiz-p-pinyin" class="quiz-question"></div>
                    </div>
                    <div class="quiz-inputs">
                        <div class="quiz-field">
                            <label>간체자를 쓰세요:</label>
                            <div class="input-with-helpers">
                                <input type="text" id="quiz-p-chinese" placeholder="병음 입력 → 한자 선택" autocomplete="off">
                                <button class="helper-btn" data-helper="draw" data-target="quiz-p-chinese"
                                    title="필기 입력">✍️</button>
                            </div>
                            <div id="quiz-p-chinese-ime" class="ime-dropdown hidden"></div>
                        </div>
                        <div class="quiz-field">
                            <label>한국어 뜻을 쓰세요:</label>
                            <input type="text" id="quiz-p-korean" placeholder="한국어 뜻 입력" autocomplete="off">
                        </div>
                    </div>
                    <div class="quiz-actions">
                        <button id="quiz-p-submit" class="quiz-submit-btn">확인</button>
                        <button id="quiz-p-skip" class="ctrl-btn">건너뛰기 →</button>
                    </div>
                    <div id="quiz-p-feedback" class="quiz-feedback"></div>
                </div>
            </section>

            <!-- ===== Quiz: Korean → Chinese + Pinyin ===== -->
            <section id="panel-quiz-korean" class="tab-panel">
                <div class="panel-controls">
                    <span id="quiz-k-score">점수: 0 / 0</span>
                    <button id="quiz-k-reset" class="ctrl-btn">↺ 다시 시작</button>
                </div>
                <div id="quiz-k-container">
                    <div class="quiz-prompt">
                        <div class="quiz-label">한국어 뜻 (Korean)</div>
                        <div id="quiz-k-korean" class="quiz-question"></div>
                    </div>
                    <div class="quiz-inputs">
                        <div class="quiz-field">
                            <label>간체자를 쓰세요:</label>
                            <div class="input-with-helpers">
                                <input type="text" id="quiz-k-chinese" placeholder="병음 입력 → 한자 선택" autocomplete="off">
                                <button class="helper-btn" data-helper="draw" data-target="quiz-k-chinese"
                                    title="필기 입력">✍️</button>
                            </div>
                            <div id="quiz-k-chinese-ime" class="ime-dropdown hidden"></div>
                        </div>
                        <div class="quiz-field">
                            <label>병음을 쓰세요:</label>
                            <input type="text" id="quiz-k-pinyin" placeholder="예: ni3 hao3 또는 nǐ hǎo"
                                autocomplete="off">
                        </div>
                    </div>
                    <div class="quiz-actions">
                        <button id="quiz-k-submit" class="quiz-submit-btn">확인</button>
                        <button id="quiz-k-skip" class="ctrl-btn">건너뛰기 →</button>
                    </div>
                    <div id="quiz-k-feedback" class="quiz-feedback"></div>
                </div>
            </section>

            <!-- ===== Pronunciation Practice ===== -->
            <section id="panel-pronunciation" class="tab-panel">
                <div class="panel-controls">
                    <button id="pron-prev" class="ctrl-btn" title="이전">◀</button>
                    <span id="pron-counter">1 / 20</span>
                    <button id="pron-next" class="ctrl-btn" title="다음">▶</button>
                    <button id="pron-shuffle" class="ctrl-btn" title="섞기">🔀</button>
                </div>
                <div id="pron-card">
                    <div class="pron-chinese"></div>
                    <div class="pron-pinyin"></div>
                    <div class="pron-meaning"></div>
                    <div class="pron-buttons">
                        <button id="pron-listen" class="pron-action-btn listen-btn">
                            🔊 듣기 (Listen)
                        </button>
                        <button id="pron-repeat" class="pron-action-btn repeat-btn">
                            🔁 다시 듣기 (Repeat)
                        </button>
                        <button id="pron-record" class="pron-action-btn record-btn">
                            🎤 따라 읽기 (Speak)
                        </button>
                    </div>
                    <div id="pron-feedback" class="pron-feedback hidden">
                        <div id="pron-result-icon"></div>
                        <div id="pron-result-text"></div>
                        <div id="pron-result-detail"></div>
                        <button id="pron-retry" class="pron-action-btn record-btn" style="margin-top:12px;">
                            🔄 다시 녹음
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Handwriting Canvas Modal -->
    <div id="handwriting-modal" class="hw-modal hidden">
        <div class="hw-modal-content">
            <div class="hw-header">
                <span>✍️ 필기 인식</span>
                <button id="hw-close" class="hw-close-btn">✕</button>
            </div>
            <div id="hw-recognized-preview" class="hw-preview"></div>
            <canvas id="hw-canvas" width="280" height="280"></canvas>
            <div id="hw-candidates" class="hw-candidates">
                <div class="ime-hint">위에 한자를 써보세요</div>
            </div>
            <div class="hw-actions">
                <button id="hw-clear" class="ctrl-btn">지우기</button>
                <button id="hw-undo" class="ctrl-btn">↩ 되돌리기</button>
                <button id="hw-confirm" class="hw-confirm-btn">✅ 완료</button>
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div id="progress-bar">
        <div id="progress-fill"></div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <script src="word-data.js"></script>
    <script src="word-tutor.js"></script>
</body>

</html>